<!DOCTYPE html><html lang="en-en"><head><title>Samuel E. Giddins</title><meta charset="utf-8" /><meta content="samuel giddins" name="keywords" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><meta content="" name="description" /><meta content="" name="author" /><meta content="True" name="HandheldFriendly" /><meta content="320" name="MobileOptimized" /><link href="../../../../stylesheets/app.css" rel="stylesheet" type="text/css" /><script src="../../../../scripts/app.js" type="text/javascript"></script></head><body class="home blog"><div id="container"><header class="header"><div class="wrap clearfix" id="inner-header"><div class="h1" id="site-title"><a href="//segiddins.me" rel="nofollow">Samuel E. Giddins</a></div><div id="site-description"><h2>UChicago 2018.</h2></div><section class="social wrap"><div><a class="symbol" href="https://github.com/segiddins" rel="me" title="&#xe036;"></a><a class="symbol" href="mailto:segiddins@segiddins.me" rel="me" title="&#xe024;"></a><a class="symbol" href="tel:9178873993" rel="me" title="&#xe049;"></a><a href='https://twitter.com/segiddins' rel="me" class='symbol' title='&#xe086;'></a><a href='https://www.linkedin.com/in/segiddins' rel="me" class='symbol' title='&#xe052;'></a></div></section><nav id="site-navigation"><ul><li><a href="//segiddins.me">About Me</a></li><li><a href="//blog.segiddins.me">Blog</a></li><li><a href="//blog.segiddins.me/rss">RSS</a></li></ul></nav></div></header><article class="wrap hentry clearfix"><header class="article-header"><h1 class="h2"><h2 class="h2"><a href="/2014/09/27/class-methods/" title="On Class Methods">On Class Methods</a></h2></h1><p class="byline vcard"><span>By </span><span class="author"><a href="https://twitter.com/segiddins">Samuel E. Giddins</a></span><span> on </span><time class="updated">Saturday, September 27th, 2014</time></p></header><section class="entry-content clearfix"><p>Class methods, aka those declared with a <code>+</code> in Objective-C, are horribly misused. In most languages I deal with, there is a difference between methods and functions&ndash;functions are used either as a map in the mathematical sense, or to imperatively perform an action, while methods are bound to a given &lsquo;receiver&rsquo;, and thus the actions they expose are something the <em>object</em> they are invoked on performs, and any map they represent is a transformation of that object into one of its properties.</p>



<hr>

<p>Often times, I see classes like this:</p>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">API</span> <span class="p">:</span> <span class="nc">NSObject</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="n">baseURL</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSURL</span> <span class="n">baseURL</span><span class="p">;</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">get</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">path</span> <span class="nf">callback</span><span class="p">:(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">NSHTTPURLResponse</span> <span class="o">*</span> <span class="n">response</span><span class="p">))</span><span class="nv">callback</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre>

<p>See that <code>+baseURL</code> method? I don&rsquo;t like it. It implies that the URL it returns is somehow an attribute of the <code>API</code> <em>class</em>, whereas that property clearly belongs on the <em>instance</em>, as evidenced by that <code>@property</code> declaration. By associating that method with the class, you are breaking the encapsulation of the instance.</p>

<hr>

<p>Another abuse of class methods I&rsquo;ve seen is the association of <em>pure</em> maps with a class.</p>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">API</span> <span class="p">:</span> <span class="nc">NSObject</span>
<span class="k">+</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">hashForRequest</span><span class="p">:(</span><span class="n">NSURLRequest</span> <span class="o">*</span><span class="p">)</span><span class="nv">request</span> <span class="nf">time</span><span class="p">:(</span><span class="n">NSDate</span> <span class="o">*</span><span class="p">)</span><span class="nv">requestTime</span><span class="p">;</span> <span class="c1">// Presumably OAuth request signing, etc.
</span><span class="k">@end</span>
</code></pre>

<p>That <code>+hashForRequest</code> method doesn&rsquo;t represent an intrinsic property of an <code>API</code> object, nor does it represent some behavior that an <code>API</code> object would be able to &#39;customize&rsquo;&ndash;instead, it takes a set of given inputs, and returns an output that depends only upon those inputs. Sound familiar? It&rsquo;s a function. Therefore, it should be represented in code as a function rather than a method.</p>

<p>(<em>n.b.</em> when a subclass would have reason to override the method, then it&rsquo;s probably correct for it to be a method.)</p>

<hr>

<p>At the end of the day, these two misuses of class methods don&rsquo;t necessarily harm a program <em>as originally written</em>, but by improperly encapsulating data, behavior, and maps, this code structure becomes brittle. It means that the different pieces of your program aren&rsquo;t where they ought to be (or where I&rsquo;d expect them to be), which can lead to more detrimental issues in your codebase.</p>
</section><footer class="article-footer"></footer></article><footer class="container footer"><div class="clearfix" id="inner-footer"><section class="recent wrap sevencol first clearfix"><nav class="pagination"><a class="newer-posts" href="/2014/07/05/new-frontiers/">&larr; Previous</a><span class="page-number">Page 33 of 51</span><a class="older-posts" href="/2014/10/05/why-i-never-write-singletons/">Next &rarr;</a><p><a href="//blog.segiddins.me/archive">Archive</a></p></nav></section><section class="sidebar fivecol clearfix"><header class="sidebar-header"><h3>Samuel E. Giddins</h3><h4>UChicago 2018.</h4></header><nav class="sidebar-menu vertical"><ul><li><a href="//segiddins.me">About Me</a><span> | </span></li><li><a href="//blog.segiddins.me">Blog</a><span> | </span></li><li><a href="//blog.segiddins.me/rss">RSS</a></li></ul></nav><section class="social wrap"><div><a class="symbol" href="https://github.com/segiddins" rel="me" title="&#xe036;"></a><a class="symbol" href="mailto:segiddins@segiddins.me" rel="me" title="&#xe024;"></a><a class="symbol" href="tel:9178873993" rel="me" title="&#xe049;"></a><a href='https://twitter.com/segiddins' rel="me" class='symbol' title='&#xe086;'></a><a href='https://www.linkedin.com/in/segiddins' rel="me" class='symbol' title='&#xe052;'></a></div></section></section></div><div class="source-og copyright"><span>Â© 2012-2017 </span><a href="//segiddins.me">Samuel E. Giddins</a></div></footer></div></body></html>